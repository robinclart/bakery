<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title><%= e.class.name %></title>
    <style media="screen">
      body {
        background: #f0f0f0;
        margin: 2em 3em;
        padding: 0;
        font-family: sans-serif;
        color: #545454;
      }
      .box {
        background: #fcfcfc;
        padding: 1em;

        -webkit-border-radius: 2px;
        -moz-border-radius: 2px;
        -o-border-radius: 2px;
        border-radius: 2px;
        -webkit-box-shadow: 0px 1px 2px rgba(0,0,0,.55);
        -moz-box-shadow: 0px 1px 2px rgba(0,0,0,.55);
        -o-box-shadow: 0px 1px 2px rgba(0,0,0,.55);
        box-shadow: 0px 1px 2px rgba(0,0,0,.55);
      }
    </style>
  </head>
  <body>
    <h1>
      <%= e.class.name %> in
      <a href="txmt://open/?url=file://<%= File.absolute_path(template.path) %>&line=<%= e.backtrace.first.split(":")[1] %>">
        <%= template.path %>
      </a>
    </h1>
    <p class="box"><%=ERB::Util.h e.message %></p>
    <h2>Backtrace</h2>
    <pre class="box"><code><%=ERB::Util.h e.backtrace.join("\n") %></code></pre>
    <h2><%=ERB::Util.h model.capitalize %></h2>
    <pre class="box"><code>path: <%=ERB::Util.h path %>
output path: <%=ERB::Util.h output.path %>
url: <%=ERB::Util.h url %>
basename: <%=ERB::Util.h basename %>
extname: <%=ERB::Util.h extname %>
template: <%=ERB::Util.h template.path %>
markdown: <%= "true" if !!path.match(/.md$/) %></code></pre>
    <h2>Data</h2>
    <pre class="box"><code>data: <%=ERB::Util.h data.instance_variable_get(:@table).inspect %></code></pre>
  </body>
</html>
